# Skill System Design v0.3 ğŸ›¡ï¸

## Guardrails Implementation - Safe Development Practices

**Release Date**: 2026-02-11

---

## ğŸ¯ What's New

v0.3 brings the **Guardrails** concept from documentation to working code! A CLI tool that intercepts dangerous commands and suggests safer alternatives.

### âœ¨ New Features

#### 1. Three Built-in Guardrail Skills

| Skill | Purpose | Rules |
|-------|---------|-------|
| **safe-rm** | Prevent accidental deletion | `rm -rf` â†’ `trash` |
| **safe-git** | Protect git operations | Block `git restore .`, warn on force push |
| **tool-matrix** | Promote modern tools | `find`â†’`fd`, `grep`â†’`rg`, `cat`â†’`bat` |

#### 2. Complete CLI

```bash
pi guardrails init --template personal    # Initialize guardrails
pi guardrails check "rm -rf test"         # Check command safety
pi guardrails apply --dry-run             # Preview fixes
pi guardrails apply --rule safe-rm        # Apply specific fix
pi guardrails list                        # Show installed skills
pi guardrails audit                       # Full system audit
```

#### 3. Smart Auto-Fix

- **Shell Detection**: Automatically detects bash/zsh/fish
- **Safe Configuration**: Creates backups before modifying configs
- **Section Management**: Tagged sections for easy updates
- **Dry Run Mode**: Preview changes without applying

#### 4. Skill System Architecture

```
guardrails/
â”œâ”€â”€ src/cli/           # Commander-based CLI
â”œâ”€â”€ src/core/          # Engine + Loader + Types
â”œâ”€â”€ src/skills/        # Pluggable guardrail skills
â””â”€â”€ src/commands/      # Command implementations
```

---

## ğŸš€ Quick Start

```bash
# Install dependencies
cd guardrails
bun install

# Run tests
bun test

# Try it out
bun run src/cli/index.ts check "rm -rf ./important"
bun run src/cli/index.ts check "git restore ."
bun run src/cli/index.ts apply --dry-run
```

---

## ğŸ› ï¸ Technical Highlights

### Unified Type System

Merged two different approaches into a unified type system supporting both:
- **Skill-based rules**: Dynamic loading from `src/skills/`
- **Config-based rules**: YAML configuration files

### Shell Adapter Pattern

```typescript
const shellAdapters: Record<ShellType, ShellAdapter> = {
  bash: { configPath: '~/.bashrc', aliasSyntax: ... },
  zsh:  { configPath: '~/.zshrc', aliasSyntax: ... },
  fish: { configPath: '~/.config/fish/config.fish', aliasSyntax: ... }
}
```

### Rule Engine

- Pattern matching with RegExp
- Whitelist support
- Severity levels (error/warning/info)
- Explicit bypass flags

---

## ğŸ‘¥ Contributors

This release represents collaborative work from three developers:

| Contributor | Role | Key Contributions |
|-------------|------|-------------------|
| **@KeenDragon** | CLI & Engine | Commander CLI, Reporter, Config system |
| **UltraStorm** | Skills & Architecture | 3 guardrail skills, type unification, merge |
| **@RedOwl** | Auto-fix | apply command, shell adapters, backups |

---

## ğŸ“Š Stats

- **Lines of Code**: ~4,000
- **Test Coverage**: 4 core tests
- **Skills**: 3 built-in
- **Supported Shells**: bash, zsh, fish
- **Development Time**: 72 hours
- **Commits**: 15+

---

## ğŸ—ºï¸ Roadmap

### v0.4 Ideas

- [ ] Registry mock service for skill distribution
- [ ] More built-in skills (env-guard, pre-commit hooks)
- [ ] Configuration UI/TUI
- [ ] Community skill marketplace
- [ ] Integration with pi-gateway

---

## ğŸ™ Acknowledgments

Thanks to the "anti-success" philosophy that made this collaboration possible:
- No ego, no competition
- Ideas over ownership
- Ready to be replaced

---

## ğŸ“œ License

- **Documentation**: CC0 (Public Domain)
- **Code**: MIT

---

*"The best guardrail is the one you don't notice until it saves you."*

**[View Full Documentation](../guardrails/README.md)**
